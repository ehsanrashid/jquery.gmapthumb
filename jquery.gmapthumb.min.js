(function(a){a.fn.gmapthumb=function(b){function f(){if(a(".gMapPopup").length===0)a("body").append('<div style="position: absolute;" class="gMapPopup"><img class="gMapImage" style="border: 5px solid #6d6d6d;" /><img class="gMapThumb" src="img/pointer.png" style="position: absolute;" /></div>');c=a(".gMapPopup");d=a(".gMapThumb");e=a(".gMapImage")}function g(b,f){var g=h(f,b),i=h(document.body,b),j=a("img",f).attr("src");e.attr("src",j);c.css("left",i.x+30*1+"px");c.css("top",i.y+30*1+"px");d.css("left",g.x-2*1+"px");d.css("top",g.y-12*1+"px")}function h(b,c){var d=a(b),e=d.offset(),f={},g=d.css("borderLeftWidth"),h=d.css("borderTopWidth"),i=d.css("paddingTop"),j=d.css("paddingLeft");f.x=c.pageX-e.left+parseInt(isNaN(j)?0:j,10)+parseInt(isNaN(g)?0:g,10);f.y=c.pageY-e.top+parseInt(isNaN(i)?0:i,10)+parseInt(isNaN(h)?0:h,10);return f}function i(){if(!c)return;c.fadeOut("slow",function(){c.css("display","none")})}function j(){if(!c)f();c.fadeIn("slow",function(){c.css("display","block")})}function k(a){a.stopPropagation();if(a.cancelBubble)a.cancelBubble=true}var c,d,e;return this.each(function(c,d){var e=b[c];if(!e||!(e instanceof google.maps.Map))throw new Error("google.maps.Map object not found");var f=a(this),h;f.delegate("div div div div div","mouseover",function(b){var c,d=a(this),e=d.position(),f=a('div:has(>img[src*="googleapis.com"])');h=undefined;if(f.length===0)return;f.each(function(){var b=a(this).position();if(b.left===e.left&&b.top===e.top){c=this;return false}});if(c&&a("img",c).width()===256){h=c;j();g(b,h)}k(b)});f.delegate("div div div div div","mousemove",function(b){if(!h){a(this).trigger("mouseover");return}g(b,h);k(b)});google.maps.event.addListener(e,"mouseout",function(a){i()})});}})(jQuery)